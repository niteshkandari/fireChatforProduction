{"ast":null,"code":"var _jsxFileName = \"/home/niteshkandari/Desktop/projects/react-js/firechat/src/components/ChatRoom.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/analytics\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport ChatMessage from \"./ChatMessage\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firestore = firebase.firestore();\n\nconst ChatRoom = () => {\n  _s();\n\n  const scrollerRef = useRef();\n  const messagesRef = firestore.collection(\"messages\");\n  const query = messagesRef.orderBy(\"createdAt\").limit(25);\n  const [messages] = useCollectionData(query, {\n    idField: \"id\"\n  });\n  const [formValue, setFormValue] = useState(\"\");\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue(\"\");\n    scrollerRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      children: [messages && messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, Math.floor(Math.random() * msg.id + idx), false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 15\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: scrollerRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: formValue,\n        placeholder: \"say something....\",\n        onChange: e => setFormValue(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !formValue,\n        children: \"\\uD83D\\uDD25\\uD83D\\uDD25\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ChatRoom, \"DCTiuxwBVK6F0AY/3KsQowOzWzQ=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["/home/niteshkandari/Desktop/projects/react-js/firechat/src/components/ChatRoom.jsx"],"names":["React","firebase","useCollectionData","ChatMessage","firestore","ChatRoom","scrollerRef","useRef","messagesRef","collection","query","orderBy","limit","messages","idField","formValue","setFormValue","useState","sendMessage","e","preventDefault","uid","photoURL","auth","currentUser","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","idx","Math","floor","random","id","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAO,2BAAP;AACA,OAAO,sBAAP;AACA,OAAO,2BAAP;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,OAAOC,WAAP,MAAwB,eAAxB;;;AAEA,MAAMC,SAAS,GAAGH,QAAQ,CAACG,SAAT,EAAlB;;AACA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACnB,QAAMC,WAAW,GAAGC,MAAM,EAA1B;AACA,QAAMC,WAAW,GAAGJ,SAAS,CAACK,UAAV,CAAqB,UAArB,CAApB;AACA,QAAMC,KAAK,GAAGF,WAAW,CAACG,OAAZ,CAAoB,WAApB,EAAiCC,KAAjC,CAAuC,EAAvC,CAAd;AACA,QAAM,CAACC,QAAD,IAAaX,iBAAiB,CAACQ,KAAD,EAAQ;AAAEI,IAAAA,OAAO,EAAE;AAAX,GAAR,CAApC;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BC,QAAQ,CAAC,EAAD,CAA1C;;AAEA,QAAMC,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBC,IAAI,CAACC,WAA/B;AAEA,UAAMhB,WAAW,CAACiB,GAAZ,CAAgB;AACpBC,MAAAA,IAAI,EAAEX,SADc;AAEpBY,MAAAA,SAAS,EAAE1B,QAAQ,CAACG,SAAT,CAAmBwB,UAAnB,CAA8BC,eAA9B,EAFS;AAGpBR,MAAAA,GAHoB;AAIpBC,MAAAA;AAJoB,KAAhB,CAAN;AAMAN,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAV,IAAAA,WAAW,CAACwB,OAAZ,CAAoBC,cAApB,CAAmC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnC;AACD,GAZD;;AAcA,sBACE;AAAA,4BACE;AAAA,iBACGnB,QAAQ,IACPA,QAAQ,CAACoB,GAAT,CAAa,CAACC,GAAD,EAAMC,GAAN,kBACX,QAAC,WAAD;AAEE,QAAA,OAAO,EAAED;AAFX,SACOE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBJ,GAAG,CAACK,EAApB,GAAyBJ,GAApC,CADP;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,eAQE;AAAK,QAAA,GAAG,EAAE7B;AAAV;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAWE;AAAM,MAAA,QAAQ,EAAEY,WAAhB;AAAA,8BACE;AACE,QAAA,KAAK,EAAEH,SADT;AAEE,QAAA,WAAW,EAAE,mBAFf;AAGE,QAAA,QAAQ,EAAGI,CAAD,IAAOH,YAAY,CAACG,CAAC,CAACqB,MAAF,CAASC,KAAV;AAH/B;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,QAAQ,EAAE,CAAC1B,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAXF;AAAA,kBADF;AAsBD,CA3CH;;GAAMV,Q;UAIiBH,iB;;;KAJjBG,Q;AA6CJ,eAAeA,QAAf","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/analytics\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport ChatMessage from \"./ChatMessage\";\n\nconst firestore = firebase.firestore();\nconst ChatRoom = () => {\n    const scrollerRef = useRef();\n    const messagesRef = firestore.collection(\"messages\");\n    const query = messagesRef.orderBy(\"createdAt\").limit(25);\n    const [messages] = useCollectionData(query, { idField: \"id\" });\n    const [formValue, setFormValue] = useState(\"\");\n  \n    const sendMessage = async (e) => {\n      e.preventDefault();\n      const { uid, photoURL } = auth.currentUser;\n  \n      await messagesRef.add({\n        text: formValue,\n        createdAt: firebase.firestore.FieldValue.serverTimestamp(),\n        uid,\n        photoURL,\n      });\n      setFormValue(\"\");\n      scrollerRef.current.scrollIntoView({ behavior: \"smooth\" });\n    };\n  \n    return (\n      <>\n        <main>\n          {messages &&\n            messages.map((msg, idx) => (\n              <ChatMessage\n                key={Math.floor(Math.random() * msg.id + idx)}\n                message={msg}\n              />\n            ))}\n          <div ref={scrollerRef} />\n        </main>\n        <form onSubmit={sendMessage}>\n          <input\n            value={formValue}\n            placeholder={\"say something....\"}\n            onChange={(e) => setFormValue(e.target.value)}\n          />\n          <button type=\"submit\" disabled={!formValue}>ðŸ”¥ðŸ”¥</button>\n        </form>\n      </>\n    );\n  };\n\n  export default ChatRoom;"]},"metadata":{},"sourceType":"module"}