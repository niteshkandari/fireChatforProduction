{"ast":null,"code":"var _jsxFileName = \"/home/niteshkandari/Desktop/projects/react-js/firechat/src/components/ChatRoom.jsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/analytics\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport ChatMessage from \"./ChatMessage\";\nimport authFire from \"../firebaseAuth\"; // firebase.initializeApp({\n//     apiKey: \"AIzaSyCHiUlklcQmzX8QACKeVv9_6JB3SAhOBpQ\",\n//     authDomain: \"firechat-c6902.firebaseapp.com\",\n//     projectId: \"firechat-c6902\",\n//     storageBucket: \"firechat-c6902.appspot.com\",\n//     messagingSenderId: \"743198984085\",\n//     appId: \"1:743198984085:web:87b52605a6bb1e4ca3d89c\",\n//     measurementId: \"G-1009D48LWS\",\n//   });\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst auth = authFire.firebase.auth();\nconst firestore = authFire.firebase.firestore();\n\nconst ChatRoom = () => {\n  _s();\n\n  const scrollerRef = React.useRef();\n  const messagesRef = firestore.collection(\"messages\");\n  const query = messagesRef.orderBy(\"createdAt\").limit(25);\n  const [messages] = useCollectionData(query, {\n    idField: \"id\"\n  });\n  const [formValue, setFormValue] = React.useState(\"\");\n\n  const sendMessage = async e => {\n    e.preventDefault();\n    const {\n      uid,\n      photoURL\n    } = auth.currentUser;\n    await messagesRef.add({\n      text: formValue,\n      createdAt: authFire.firebase.firestore.FieldValue.serverTimestamp(),\n      uid,\n      photoURL\n    });\n    setFormValue(\"\");\n    scrollerRef.current.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"main\", {\n      children: [messages && messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(ChatMessage, {\n        message: msg\n      }, Math.floor(Math.random() * msg.id + idx), false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 15\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: scrollerRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        value: formValue,\n        placeholder: \"say something....\",\n        onChange: e => setFormValue(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        disabled: !formValue,\n        children: \"\\uD83D\\uDD25\\uD83D\\uDD25\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ChatRoom, \"DCTiuxwBVK6F0AY/3KsQowOzWzQ=\", false, function () {\n  return [useCollectionData];\n});\n\n_c = ChatRoom;\nexport default ChatRoom;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChatRoom\");","map":{"version":3,"sources":["/home/niteshkandari/Desktop/projects/react-js/firechat/src/components/ChatRoom.jsx"],"names":["React","firebase","useCollectionData","ChatMessage","authFire","auth","firestore","ChatRoom","scrollerRef","useRef","messagesRef","collection","query","orderBy","limit","messages","idField","formValue","setFormValue","useState","sendMessage","e","preventDefault","uid","photoURL","currentUser","add","text","createdAt","FieldValue","serverTimestamp","current","scrollIntoView","behavior","map","msg","idx","Math","floor","random","id","target","value"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,qBAArB;AACA,OAAO,2BAAP;AACA,OAAO,sBAAP;AACA,OAAO,2BAAP;AACA,SAASC,iBAAT,QAAkC,gCAAlC;AACA,OAAOC,WAAP,MAAwB,eAAxB;AACA,OAAOC,QAAP,MAAqB,iBAArB,C,CACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AACA,MAAMC,IAAI,GAAGD,QAAQ,CAACH,QAAT,CAAkBI,IAAlB,EAAb;AACA,MAAMC,SAAS,GAAGF,QAAQ,CAACH,QAAT,CAAkBK,SAAlB,EAAlB;;AAEA,MAAMC,QAAQ,GAAG,MAAM;AAAA;;AACnB,QAAMC,WAAW,GAAGR,KAAK,CAACS,MAAN,EAApB;AACA,QAAMC,WAAW,GAAGJ,SAAS,CAACK,UAAV,CAAqB,UAArB,CAApB;AACA,QAAMC,KAAK,GAAGF,WAAW,CAACG,OAAZ,CAAoB,WAApB,EAAiCC,KAAjC,CAAuC,EAAvC,CAAd;AACA,QAAM,CAACC,QAAD,IAAab,iBAAiB,CAACU,KAAD,EAAQ;AAAEI,IAAAA,OAAO,EAAE;AAAX,GAAR,CAApC;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BlB,KAAK,CAACmB,QAAN,CAAe,EAAf,CAAlC;;AAEA,QAAMC,WAAW,GAAG,MAAOC,CAAP,IAAa;AAC/BA,IAAAA,CAAC,CAACC,cAAF;AACA,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA;AAAP,QAAoBnB,IAAI,CAACoB,WAA/B;AAEA,UAAMf,WAAW,CAACgB,GAAZ,CAAgB;AACpBC,MAAAA,IAAI,EAAEV,SADc;AAEpBW,MAAAA,SAAS,EAAExB,QAAQ,CAACH,QAAT,CAAkBK,SAAlB,CAA4BuB,UAA5B,CAAuCC,eAAvC,EAFS;AAGpBP,MAAAA,GAHoB;AAIpBC,MAAAA;AAJoB,KAAhB,CAAN;AAMAN,IAAAA,YAAY,CAAC,EAAD,CAAZ;AACAV,IAAAA,WAAW,CAACuB,OAAZ,CAAoBC,cAApB,CAAmC;AAAEC,MAAAA,QAAQ,EAAE;AAAZ,KAAnC;AACD,GAZD;;AAcA,sBACE;AAAA,4BACE;AAAA,iBACGlB,QAAQ,IACPA,QAAQ,CAACmB,GAAT,CAAa,CAACC,GAAD,EAAMC,GAAN,kBACX,QAAC,WAAD;AAEE,QAAA,OAAO,EAAED;AAFX,SACOE,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,KAAgBJ,GAAG,CAACK,EAApB,GAAyBJ,GAApC,CADP;AAAA;AAAA;AAAA;AAAA,cADF,CAFJ,eAQE;AAAK,QAAA,GAAG,EAAE5B;AAAV;AAAA;AAAA;AAAA;AAAA,cARF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,eAWE;AAAM,MAAA,QAAQ,EAAEY,WAAhB;AAAA,8BACE;AACE,QAAA,KAAK,EAAEH,SADT;AAEE,QAAA,WAAW,EAAE,mBAFf;AAGE,QAAA,QAAQ,EAAGI,CAAD,IAAOH,YAAY,CAACG,CAAC,CAACoB,MAAF,CAASC,KAAV;AAH/B;AAAA;AAAA;AAAA;AAAA,cADF,eAME;AAAQ,QAAA,IAAI,EAAC,QAAb;AAAsB,QAAA,QAAQ,EAAE,CAACzB,SAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YAXF;AAAA,kBADF;AAsBD,CA3CH;;GAAMV,Q;UAIiBL,iB;;;KAJjBK,Q;AA6CJ,eAAeA,QAAf","sourcesContent":["import React from \"react\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/firestore\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/analytics\";\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\nimport ChatMessage from \"./ChatMessage\";\nimport authFire from \"../firebaseAuth\";\n// firebase.initializeApp({\n//     apiKey: \"AIzaSyCHiUlklcQmzX8QACKeVv9_6JB3SAhOBpQ\",\n//     authDomain: \"firechat-c6902.firebaseapp.com\",\n//     projectId: \"firechat-c6902\",\n//     storageBucket: \"firechat-c6902.appspot.com\",\n//     messagingSenderId: \"743198984085\",\n//     appId: \"1:743198984085:web:87b52605a6bb1e4ca3d89c\",\n//     measurementId: \"G-1009D48LWS\",\n//   });\nconst auth = authFire.firebase.auth();\nconst firestore = authFire.firebase.firestore();\n\nconst ChatRoom = () => {\n    const scrollerRef = React.useRef();\n    const messagesRef = firestore.collection(\"messages\");\n    const query = messagesRef.orderBy(\"createdAt\").limit(25);\n    const [messages] = useCollectionData(query, { idField: \"id\" });\n    const [formValue, setFormValue] = React.useState(\"\");\n  \n    const sendMessage = async (e) => {\n      e.preventDefault();\n      const { uid, photoURL } = auth.currentUser;\n  \n      await messagesRef.add({\n        text: formValue,\n        createdAt: authFire.firebase.firestore.FieldValue.serverTimestamp(),\n        uid,\n        photoURL,\n      });\n      setFormValue(\"\");\n      scrollerRef.current.scrollIntoView({ behavior: \"smooth\" });\n    };\n  \n    return (\n      <>\n        <main>\n          {messages &&\n            messages.map((msg, idx) => (\n              <ChatMessage\n                key={Math.floor(Math.random() * msg.id + idx)}\n                message={msg}\n              />\n            ))}\n          <div ref={scrollerRef} />\n        </main>\n        <form onSubmit={sendMessage}>\n          <input\n            value={formValue}\n            placeholder={\"say something....\"}\n            onChange={(e) => setFormValue(e.target.value)}\n          />\n          <button type=\"submit\" disabled={!formValue}>ðŸ”¥ðŸ”¥</button>\n        </form>\n      </>\n    );\n  };\n\n  export default ChatRoom;"]},"metadata":{},"sourceType":"module"}